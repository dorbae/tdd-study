# TDD(Test-Driven Development) Study
## Environment
* Java 11
* Junit 5
* IntelliJ IDEA

## Study book
* 테스트 주도 개발 시작하기 (최범균 저, 가메출판사)

## Study 내용
### Chapter 01. TDD 개발 준비
* Gradle + JUnit 5 프로젝트 생성 및 설정

### Chapter 02. TDD 시작
### 기존 개발 방식
* 개발/테스트 흐름

```mermaid
graph LR
    step1[한 번에 코드 구현] --> step2[테스트]
    step2 --> step3[디버깅 & 코드 수정]
    step3 --> step1
```
* 테스트할 코드가 너무 많아짐

### TDD란
* 기능을 검증하는 테스트 코드를 먼저 작성하고 테스트를 통과시키기 위해 개발을 진행
* 테스트 코드를 작성하면서 구현체의 클래스, 메소드 이름, 파라미터, 리턴 타입 등을고민 -> 실제 코드 설계하는 과정과 유사
* 컴파일 오류가 나더라도 테스트 코드를 먼저 작성하고 구현체를 최소로 구현 -> 다시 테스트 코드 작성 -> 구현을 반복 => 점진적으로 기능 완성
* 실체 구현체는 src/test에서 작성 후, 테스트가 완료되면 src/main으로 이동
* 테스트 코드도 유지보수 대상이므로 의미가 잘 드러나고 중복된 코드가 없도록 리팩토링 필요

### TDD 흐름

```mermaid
graph LR
    step1[테스트] --> step2[코딩]
    step2 --> step3[리팩토링]
    step3 --> step1
```

* 테스트를 먼저 작성 -> 테스트를 통과시킬만큼 코드를 작성 -> 리팩토링의 과정을 반복
* **레드-그린-리팩터**라고도 불림
  * 테스트 코드로 실패 케이스를 작성(레드)
  * 코딩으로 정상적으로 통과하도록 기능 구현(그린)
  * 리팩토링(리팩터)

#### 테스트가 개발을 주도
* 테스트 코드를 만들면, 다음 개발 범위가 정해짐
* 테스트 코드가 추가되면서 검증하는 범위가 넓어질수록 구현도 점점 완성

#### 지속적인 코드 정리
* 테스트 코드가 있으면 리팩토링 후에 기능이 정상 동작하는 것을 바로 확인 가능하므로, 과감하게 리팩토링 가능

#### 빠른 피드백
* 새로운 기능 추가나 기존 코드 수정 시, 바로 동작을 확인할 수 있어 빠른 피드백 가능

### Chapter 03. 테스트 코드 작성 순서
#### 기본적인 테스트 코드작성 순서
* 쉬운 경우에서 어려운 경우로 진행
* 예외적인 경우에서 정상적인 경우로 진행
* 지속적인 리팩토링
  * 코드가 길어지면, 메소드 추출과 같은 기법을 사용해서 매서드 이름으로 코드의 의미를 표현 가능
  * 마틴 파울러가 쓴 '[리팩토링](http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&mallGb=KOR&barcode=9791162242742&orderClick=LAG&Kc=)' 도서 권장

**Q.** 복잡한 테스트부터 시작하면 안되는 이유<br/>
* A. 처음부터 복잡한 상황을 테스트로 추가하면 해당 테스트를 위해 한 번에 구현해야할 코드가 많아짐

**Q.** 예외 상황을 먼저 테스트 하는 이유 
* A. 다양한 예외 상황은 복잡한 if-else 블록을 동반. 정상 케이스 작성 후, 예외 상황을 작성하다보면 실체 구현체의 구조가 크게 바뀔 수 있음
* A. 예외 상황에 대한 구현체를 먼저 작성하면 구조가 크게 바뀌는 일을 줄일 수 있음


> 테스트 케이스의 메소드명은 한글로 작성 가능
>  * 영어로 표현하기에 메소드명이 너무 길어질 경우, 한글로 표현하는 것도 한 가지 방법

#### 테스트할 목록 정리
* TDD를 시작할 때 테스트할 목록을 미리 정리
* 정리 후, 어떤 테스트가 구현이 쉬울지, 예외적인지 판단하고 순서대로 진행
* 테스트 진행 중 새로운 테스트 케이스가 필요하거나 떠오르면 목록에 반드시 추가하고 테스트 진행
* 범위가 큰 리팩토링은 시간이 오래 걸려 TDD 흐름을 깨기 쉬움. 규모가 큰 리팩토링은 목록에 추가하고, 테스트 작성에 집중
  * 범위가 큰 리팩토링 진행 전에는 반드시 코드 Commit 필요